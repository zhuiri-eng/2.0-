<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>å¤é€‰æ¡†ç»ˆææµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f0f0;
            padding: 20px;
            margin: 0;
        }
        
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-item {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .test-item h3 {
            margin: 0 0 10px 0;
            color: #555;
        }
        
        /* æ–¹æ³•1ï¼šåŸç”Ÿå¤é€‰æ¡† */
        .native-checkbox {
            margin: 10px 0;
        }
        
        .native-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }
        
        /* æ–¹æ³•2ï¼šè‡ªå®šä¹‰æ ·å¼å¤é€‰æ¡† */
        .custom-checkbox {
            margin: 10px 0;
        }
        
        .custom-checkbox input[type="checkbox"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid #007bff;
            border-radius: 4px;
            background: white;
            position: relative;
            cursor: pointer;
            margin-right: 10px;
            display: inline-block;
            vertical-align: middle;
        }
        
        .custom-checkbox input[type="checkbox"]:checked {
            background: #007bff;
            border-color: #007bff;
        }
        
        .custom-checkbox input[type="checkbox"]:checked::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 14px;
            font-weight: bold;
        }
        
        /* æ–¹æ³•3ï¼šå¼ºåˆ¶æ ·å¼å¤é€‰æ¡† */
        .forced-checkbox {
            margin: 10px 0;
        }
        
        .forced-checkbox input[type="checkbox"] {
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            appearance: none !important;
            width: 24px !important;
            height: 24px !important;
            border: 2px solid #28a745 !important;
            border-radius: 4px !important;
            background: white !important;
            position: relative !important;
            cursor: pointer !important;
            margin-right: 10px !important;
            display: inline-block !important;
            vertical-align: middle !important;
            z-index: 1000 !important;
            pointer-events: auto !important;
            opacity: 1 !important;
            visibility: visible !important;
        }
        
        .forced-checkbox input[type="checkbox"]:checked {
            background: #28a745 !important;
            border-color: #28a745 !important;
        }
        
        .forced-checkbox input[type="checkbox"]:checked::after {
            content: 'âœ“' !important;
            position: absolute !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            color: white !important;
            font-size: 16px !important;
            font-weight: bold !important;
        }
        
        .status {
            margin-top: 10px;
            padding: 8px;
            background: #e9ecef;
            border-radius: 4px;
            font-size: 14px;
            color: #495057;
        }
        
        .status.checked {
            background: #d4edda;
            color: #155724;
        }
        
        .status.unchecked {
            background: #f8d7da;
            color: #721c24;
        }
        
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        .test-button:hover {
            background: #0056b3;
        }
        
        .instructions {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .instructions h4 {
            margin: 0 0 10px 0;
            color: #856404;
        }
        
        .instructions ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .instructions li {
            margin: 5px 0;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ å¤é€‰æ¡†ç»ˆææµ‹è¯•é¡µé¢</h1>
        
        <div class="instructions">
            <h4>æµ‹è¯•è¯´æ˜ï¼š</h4>
            <ul>
                <li>ç‚¹å‡»æ¯ä¸ªå¤é€‰æ¡†ï¼Œè§‚å¯ŸçŠ¶æ€å˜åŒ–</li>
                <li>ç‚¹å‡»æ ‡ç­¾æ–‡å­—ï¼Œçœ‹æ˜¯å¦èƒ½åˆ‡æ¢å¤é€‰æ¡†</li>
                <li>åœ¨å¾®ä¿¡ä¸­æ‰“å¼€æ­¤é¡µé¢æµ‹è¯•</li>
                <li>éƒ¨ç½²åˆ°Netlifyåå†æ¬¡æµ‹è¯•</li>
                <li>è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºä¿¡æ¯</li>
            </ul>
        </div>
        
        <div class="test-item">
            <h3>æ–¹æ³•1ï¼šåŸç”Ÿå¤é€‰æ¡†</h3>
            <div class="native-checkbox">
                <input type="checkbox" id="native1">
                <label for="native1">åŸç”Ÿå¤é€‰æ¡† 1</label>
            </div>
            <div class="native-checkbox">
                <input type="checkbox" id="native2">
                <label for="native2">åŸç”Ÿå¤é€‰æ¡† 2</label>
            </div>
            <div class="status" id="status-native1">çŠ¶æ€ï¼šæœªé€‰ä¸­</div>
            <div class="status" id="status-native2">çŠ¶æ€ï¼šæœªé€‰ä¸­</div>
        </div>
        
        <div class="test-item">
            <h3>æ–¹æ³•2ï¼šè‡ªå®šä¹‰æ ·å¼å¤é€‰æ¡†</h3>
            <div class="custom-checkbox">
                <input type="checkbox" id="custom1">
                <label for="custom1">è‡ªå®šä¹‰å¤é€‰æ¡† 1</label>
            </div>
            <div class="custom-checkbox">
                <input type="checkbox" id="custom2">
                <label for="custom2">è‡ªå®šä¹‰å¤é€‰æ¡† 2</label>
            </div>
            <div class="status" id="status-custom1">çŠ¶æ€ï¼šæœªé€‰ä¸­</div>
            <div class="status" id="status-custom2">çŠ¶æ€ï¼šæœªé€‰ä¸­</div>
        </div>
        
        <div class="test-item">
            <h3>æ–¹æ³•3ï¼šå¼ºåˆ¶æ ·å¼å¤é€‰æ¡†ï¼ˆæ¨èï¼‰</h3>
            <div class="forced-checkbox">
                <input type="checkbox" id="forced1">
                <label for="forced1">å¼ºåˆ¶æ ·å¼å¤é€‰æ¡† 1</label>
            </div>
            <div class="forced-checkbox">
                <input type="checkbox" id="forced2">
                <label for="forced2">å¼ºåˆ¶æ ·å¼å¤é€‰æ¡† 2</label>
            </div>
            <div class="status" id="status-forced1">çŠ¶æ€ï¼šæœªé€‰ä¸­</div>
            <div class="status" id="status-forced2">çŠ¶æ€ï¼šæœªé€‰ä¸­</div>
        </div>
        
        <div class="test-item">
            <h3>éšç§åè®®æµ‹è¯•ï¼ˆæ¨¡æ‹Ÿä¸»é¡µé¢ï¼‰</h3>
            <div class="forced-checkbox">
                <input type="checkbox" id="privacyTest" required>
                <label for="privacyTest">
                    <strong>æˆ‘å·²é˜…è¯»å¹¶åŒæ„</strong><br>
                    <a href="#" onclick="alert('éšç§åè®®')">ã€Šéšç§åè®®ã€‹</a>
                    å’Œ
                    <a href="#" onclick="alert('æœåŠ¡æ¡æ¬¾')">ã€ŠæœåŠ¡æ¡æ¬¾ã€‹</a>
                    <br><small style="color: #007bff; font-size: 12px;">* å¿…é¡»å‹¾é€‰æ‰èƒ½ç»§ç»­</small>
                </label>
            </div>
            <div class="status" id="status-privacy">çŠ¶æ€ï¼šæœªé€‰ä¸­</div>
            <button class="test-button" onclick="testPrivacy()">æµ‹è¯•éšç§åè®®å¤é€‰æ¡†</button>
        </div>
        
        <div class="test-item">
            <h3>æ‰¹é‡æ“ä½œæµ‹è¯•</h3>
            <button class="test-button" onclick="checkAll()">å…¨é€‰</button>
            <button class="test-button" onclick="uncheckAll()">å…¨ä¸é€‰</button>
            <button class="test-button" onclick="toggleAll()">åé€‰</button>
            <button class="test-button" onclick="resetAll()">é‡ç½®</button>
        </div>
        
        <div class="test-item">
            <h3>è°ƒè¯•ä¿¡æ¯</h3>
            <div id="debug-info" style="background: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;">
                ç­‰å¾…æ“ä½œ...
            </div>
        </div>
    </div>

    <script>
        // è°ƒè¯•ä¿¡æ¯å‡½æ•°
        function log(message) {
            const debugInfo = document.getElementById('debug-info');
            const timestamp = new Date().toLocaleTimeString();
            debugInfo.innerHTML += `[${timestamp}] ${message}<br>`;
            debugInfo.scrollTop = debugInfo.scrollHeight;
            console.log(message);
        }
        
        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus(checkboxId) {
            const checkbox = document.getElementById(checkboxId);
            const statusElement = document.getElementById(`status-${checkboxId}`);
            if (checkbox && statusElement) {
                const isChecked = checkbox.checked;
                statusElement.textContent = `çŠ¶æ€ï¼š${isChecked ? 'å·²é€‰ä¸­' : 'æœªé€‰ä¸­'}`;
                statusElement.className = `status ${isChecked ? 'checked' : 'unchecked'}`;
                log(`å¤é€‰æ¡† ${checkboxId} çŠ¶æ€å˜åŒ–: ${isChecked ? 'é€‰ä¸­' : 'æœªé€‰ä¸­'}`);
            }
        }
        
        // è®¾ç½®å¤é€‰æ¡†äº‹ä»¶å¤„ç†å™¨
        function setupCheckbox(checkboxId, method) {
            const checkbox = document.getElementById(checkboxId);
            if (!checkbox) return;
            
            // ç§»é™¤ç°æœ‰äº‹ä»¶ç›‘å¬å™¨
            const newCheckbox = checkbox.cloneNode(true);
            checkbox.parentNode.replaceChild(newCheckbox, checkbox);
            
            // é‡æ–°è·å–å¤é€‰æ¡†
            const freshCheckbox = document.getElementById(checkboxId);
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶
            freshCheckbox.onclick = function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.checked = !this.checked;
                updateStatus(checkboxId);
                log(`${method} å¤é€‰æ¡† ${checkboxId} ç‚¹å‡»äº‹ä»¶è§¦å‘`);
                return false;
            };
            
            // æ·»åŠ è§¦æ‘¸äº‹ä»¶
            freshCheckbox.ontouchstart = function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.checked = !this.checked;
                updateStatus(checkboxId);
                log(`${method} å¤é€‰æ¡† ${checkboxId} è§¦æ‘¸äº‹ä»¶è§¦å‘`);
                return false;
            };
            
            // æ·»åŠ é”®ç›˜äº‹ä»¶
            freshCheckbox.onkeydown = function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.checked = !this.checked;
                    updateStatus(checkboxId);
                    log(`${method} å¤é€‰æ¡† ${checkboxId} é”®ç›˜äº‹ä»¶è§¦å‘`);
                }
            };
            
            // ä¸ºæ ‡ç­¾æ·»åŠ ç‚¹å‡»äº‹ä»¶
            const label = document.querySelector(`label[for="${checkboxId}"]`);
            if (label) {
                label.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const checkbox = document.getElementById(checkboxId);
                    if (checkbox) {
                        checkbox.checked = !checkbox.checked;
                        updateStatus(checkboxId);
                        log(`${method} å¤é€‰æ¡† ${checkboxId} æ ‡ç­¾ç‚¹å‡»äº‹ä»¶è§¦å‘`);
                    }
                    return false;
                };
            }
            
            log(`å·²è®¾ç½® ${method} å¤é€‰æ¡† ${checkboxId} çš„äº‹ä»¶å¤„ç†å™¨`);
        }
        
        // æ‰¹é‡æ“ä½œå‡½æ•°
        function checkAll() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = true;
                updateStatus(checkbox.id);
            });
            log('æ‰§è¡Œå…¨é€‰æ“ä½œ');
        }
        
        function uncheckAll() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = false;
                updateStatus(checkbox.id);
            });
            log('æ‰§è¡Œå…¨ä¸é€‰æ“ä½œ');
        }
        
        function toggleAll() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = !checkbox.checked;
                updateStatus(checkbox.id);
            });
            log('æ‰§è¡Œåé€‰æ“ä½œ');
        }
        
        function resetAll() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = false;
                updateStatus(checkbox.id);
            });
            log('æ‰§è¡Œé‡ç½®æ“ä½œ');
        }
        
        function testPrivacy() {
            const privacyCheckbox = document.getElementById('privacyTest');
            if (privacyCheckbox) {
                const isChecked = privacyCheckbox.checked;
                if (isChecked) {
                    alert('éšç§åè®®å¤é€‰æ¡†å·²é€‰ä¸­ï¼Œå¯ä»¥ç»§ç»­æ“ä½œï¼');
                } else {
                    alert('è¯·å…ˆå‹¾é€‰éšç§åè®®å¤é€‰æ¡†ï¼');
                }
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–å¤é€‰æ¡†...');
            
            // è®¾ç½®æ‰€æœ‰å¤é€‰æ¡†
            setupCheckbox('native1', 'åŸç”Ÿ');
            setupCheckbox('native2', 'åŸç”Ÿ');
            setupCheckbox('custom1', 'è‡ªå®šä¹‰');
            setupCheckbox('custom2', 'è‡ªå®šä¹‰');
            setupCheckbox('forced1', 'å¼ºåˆ¶æ ·å¼');
            setupCheckbox('forced2', 'å¼ºåˆ¶æ ·å¼');
            setupCheckbox('privacyTest', 'éšç§åè®®');
            
            // å»¶è¿Ÿå†æ¬¡è®¾ç½®ï¼Œç¡®ä¿å…¼å®¹æ€§
            setTimeout(() => {
                log('å»¶è¿Ÿè®¾ç½®å¤é€‰æ¡†äº‹ä»¶å¤„ç†å™¨...');
                setupCheckbox('native1', 'åŸç”Ÿ');
                setupCheckbox('native2', 'åŸç”Ÿ');
                setupCheckbox('custom1', 'è‡ªå®šä¹‰');
                setupCheckbox('custom2', 'è‡ªå®šä¹‰');
                setupCheckbox('forced1', 'å¼ºåˆ¶æ ·å¼');
                setupCheckbox('forced2', 'å¼ºåˆ¶æ ·å¼');
                setupCheckbox('privacyTest', 'éšç§åè®®');
            }, 100);
            
            setTimeout(() => {
                log('æœ€ç»ˆè®¾ç½®å¤é€‰æ¡†äº‹ä»¶å¤„ç†å™¨...');
                setupCheckbox('native1', 'åŸç”Ÿ');
                setupCheckbox('native2', 'åŸç”Ÿ');
                setupCheckbox('custom1', 'è‡ªå®šä¹‰');
                setupCheckbox('custom2', 'è‡ªå®šä¹‰');
                setupCheckbox('forced1', 'å¼ºåˆ¶æ ·å¼');
                setupCheckbox('forced2', 'å¼ºåˆ¶æ ·å¼');
                setupCheckbox('privacyTest', 'éšç§åè®®');
            }, 500);
            
            log('åˆå§‹åŒ–å®Œæˆï¼');
        });
        
        // é¡µé¢å¯è§æ€§å˜åŒ–æ—¶é‡æ–°è®¾ç½®
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                log('é¡µé¢é‡æ–°å¯è§ï¼Œé‡æ–°è®¾ç½®å¤é€‰æ¡†...');
                setupCheckbox('native1', 'åŸç”Ÿ');
                setupCheckbox('native2', 'åŸç”Ÿ');
                setupCheckbox('custom1', 'è‡ªå®šä¹‰');
                setupCheckbox('custom2', 'è‡ªå®šä¹‰');
                setupCheckbox('forced1', 'å¼ºåˆ¶æ ·å¼');
                setupCheckbox('forced2', 'å¼ºåˆ¶æ ·å¼');
                setupCheckbox('privacyTest', 'éšç§åè®®');
            }
        });
    </script>
</body>
</html> 